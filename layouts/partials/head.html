<head>
  {{- partial "gtm-head.html" . -}}
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} | {{ site.Title }}{{ end }}</title>
  {{- $description := site.Params.description -}}
  {{- if .Description -}}
    {{- $description = .Description -}}
  {{- else if not .IsHome -}}
    {{- $description = .Summary | plainify | truncate 200 -}}
  {{- end -}}
  {{- $image := "img/avatar.jpg" | absURL -}}
  {{- with .Params.image -}}
    {{- $image = . | absURL -}}
  {{- end -}}
  <meta name="description" content="{{ $description }}">
  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:description" content="{{ $description }}">
  <meta property="og:type" content="{{ cond .IsPage "article" "website" }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:site_name" content="{{ site.Title }}">
  <meta property="og:image" content="{{ $image }}">
  {{- if .IsPage }}
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">
  {{- range .Params.categories }}
  <meta property="article:tag" content="{{ . }}">
  {{- end }}
  {{- end }}
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="{{ .Title }}">
  <meta name="twitter:description" content="{{ $description }}">
  <meta name="twitter:image" content="{{ $image }}">
  {{- with site.Params.twitter }}
  <meta name="twitter:site" content="@{{ . }}">
  {{- end }}
  <link rel="canonical" href="{{ .Permalink }}">
  <link rel="stylesheet" href="{{ "css/style.css" | absURL }}">
  {{- range .AlternativeOutputFormats -}}
  {{ printf `<link rel="%s" type="%s" title="%s" href="%s" />` .Rel .MediaType.Type $.Site.Title .Permalink | safeHTML }}
  {{- end -}}
  {{- $author := dict "@type" "Person" "name" site.Title "url" site.BaseURL -}}
  {{- if .IsPage -}}
    {{- $ld := dict
      "@context" "https://schema.org"
      "@type" "BlogPosting"
      "headline" .Title
      "description" $description
      "url" .Permalink
      "datePublished" (.Date.Format "2006-01-02T15:04:05-07:00")
      "dateModified" (.Lastmod.Format "2006-01-02T15:04:05-07:00")
      "image" $image
      "author" $author
      "publisher" $author
      "mainEntityOfPage" (dict "@type" "WebPage" "@id" .Permalink)
    -}}
  {{ printf `<script type="application/ld+json">%s</script>` ($ld | jsonify) | safeHTML }}
  {{- else -}}
    {{- $ld := dict
      "@context" "https://schema.org"
      "@type" "WebSite"
      "name" site.Title
      "url" site.BaseURL
      "description" $description
      "author" $author
    -}}
  {{ printf `<script type="application/ld+json">%s</script>` ($ld | jsonify) | safeHTML }}
  {{- end }}
</head>
